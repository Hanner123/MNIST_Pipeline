schema: '2.0'
stages:
  train:
    cmd: python train.py
    deps:
    - path: train.py
      hash: md5
      md5: b522c1d3135f84f07bd3b48631978871
      size: 7284
    params:
      params.yaml:
        train.batch_size: 128
        train.lr: 0.5
    outs:
    - path: full_model.pth
      hash: md5
      md5: 52740cb33734518202f36a6a88e8befe
      size: 104808
    - path: test_data.pt
      hash: md5
      md5: 85ba9721e8544873a4c67cc49a237d99
      size: 7921764
    - path: training_data.json
      hash: md5
      md5: 9fa7d3d774ef9a25b8cd306f63442a12
      size: 1374
  evaluate:
    cmd: python evaluate.py
    deps:
    - path: evaluate.py
      hash: md5
      md5: 331c7b7121808657cdb88a77b2a6c6de
      size: 5782
    - path: full_model.pth
      hash: md5
      md5: 52740cb33734518202f36a6a88e8befe
      size: 104808
    - path: test_data.pt
      hash: md5
      md5: 85ba9721e8544873a4c67cc49a237d99
      size: 7921764
    params:
      params.yaml:
        train.batch_size: 128
    outs:
    - path: confusion_matrix.csv
      hash: md5
      md5: eff0fa2818b0fa7c2f9d886bf907a830
      size: 297
    - path: loss.png
      hash: md5
      md5: 6cf2db28f44fe6ab3cf22bb85ccf7b44
      size: 25163
    - path: metrics.json
      hash: md5
      md5: 3f6a4d9e4cd2d7798a8fdb1ed990aa92
      size: 928
  export:
    cmd: python export_model.py
    deps:
    - path: export_model.py
      hash: md5
      md5: aff4e312a5f54fb72e9397179117629d
      size: 720
    - path: full_model.pth
      hash: md5
      md5: 52740cb33734518202f36a6a88e8befe
      size: 104808
    params:
      params.yaml:
        train.batch_size: 128
    outs:
    - path: mnist_model.onnx
      hash: md5
      md5: 050288a8b5142cec90d15c73aafa4b49
      size: 107747
  measure:
    cmd: python measure.py
    deps:
    - path: mnist_model.onnx
      hash: md5
      md5: 050288a8b5142cec90d15c73aafa4b49
      size: 107747
    - path: test_data.pt
      hash: md5
      md5: 85ba9721e8544873a4c67cc49a237d99
      size: 7921764
    params:
      params.yaml:
        train.batch_size: 128
    outs:
    - path: tensorrt_inteference.txt
      hash: md5
      md5: 616b98d1ad72a4cac7a944c50b882ada
      size: 255
